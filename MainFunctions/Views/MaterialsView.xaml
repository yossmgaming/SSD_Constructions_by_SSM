<UserControl x:Class="MainFunctions.Views.MaterialsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#F5F5F5">

    <Grid Grid.Row="2">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="3*"/>
            <ColumnDefinition Width="2*"/>
        </Grid.ColumnDefinitions>

        <!-- MATERIAL LIST -->
        <Border Background="White" CornerRadius="8" Padding="10" Margin="0,0,10,0">
            <DataGrid x:Name="MaterialsGrid"
                  AutoGenerateColumns="False"
                  CanUserAddRows="False"
                  IsReadOnly="True"
                  SelectionMode="Single"
                  MouseDoubleClick="MaterialsGrid_DoubleClick">

                <DataGrid.Columns>
                    <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
                    <DataGridTextColumn Header="Category" Binding="{Binding Category}" Width="150"/>
                    <DataGridTextColumn Header="Stock" Binding="{Binding Quantity}" Width="100"/>
                    <DataGridTextColumn Header="Unit" Binding="{Binding Unit}" Width="100"/>
                    <!-- New: Cost column with comma formatting and two decimals -->
                    <DataGridTextColumn Header="Cost (LKR)" Binding="{Binding Cost, StringFormat=LKR {0:N2}}" Width="130"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <!-- EDIT/ADD PANEL -->
        <Border Grid.Column="1" Background="White" CornerRadius="8" Padding="14">
            <StackPanel>
                <!-- SEARCH EXISTING MATERIAL -->
                <TextBlock Text="Find Material"
           FontWeight="SemiBold"
           Margin="0,0,0,5"/>

                <TextBox x:Name="SearchExistingBox"
         Height="28"
         Margin="0,0,0,12"
         ToolTip="Search by name..."
         TextChanged="SearchExistingBox_TextChanged"/>


                <TextBlock Text="Material Details"
                       FontWeight="Bold"
                       FontSize="16"
                       Margin="0,0,0,10"/>

                <TextBlock Text="Name"/>
                <TextBox x:Name="MatName" Margin="0,0,0,8"/>

                <TextBlock Text="Category"/>
                <TextBox x:Name="MatCategory" Margin="0,0,0,8"/>

                <TextBlock Text="Quantity"/>
                <TextBox x:Name="MatQuantity" Margin="0,0,0,8"/>

                <TextBlock Text="Unit"/>
                <TextBox x:Name="MatUnit" Margin="0,0,0,8"/>

                <TextBlock Text="Cost (LKR)"/>
                <TextBox x:Name="MatCost" Margin="0,0,0,14"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="Save"
                        Width="90"
                            Height="34"
                        Margin="0,0,10,0"
                        Click="SaveMaterial_Click"/>

                    <Button Content="Delete"
                        Width="90"
                            Height="34"
                        Margin="0,0,10,0"
                        Click="DeleteMaterial_Click"/>

                    <Button Content="Clear"
                        Width="90"
                            Height="34"
                        Click="ClearForm_Click"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>


</UserControl>
